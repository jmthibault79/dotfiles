# git branch/tag source: Oliver Davies
# http://oliverdavies.co.uk/blog/2013/04/display-git-branch-or-tag-names-your-bash-prompt

parse_git_branch () {
  git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/'
}

parse_git_tag () {
  git describe --tags 2> /dev/null
}

parse_git_branch_or_tag() {
  local OUT="$(parse_git_branch)"
  if [ "$OUT" == " ((no branch))" ]; then
    OUT="($(parse_git_tag))";
  fi
  echo $OUT
}

PS1="\[\e[1;30m\][\j:\!\[\e[0;32m\]+${SHLVL}\[\e[1;30m\]]\[\[\e[1;30m\][\[\e[1;34m\]\u@\H\[\e[1;30m\]:\[\e[1;37m\]\w\[\e[1;33m\]\$(parse_git_branch_or_tag)\[\e[1;30m\]] \[\e[0;37m\]\$ "
